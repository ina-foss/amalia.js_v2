<div class="header">
    <div class="title">
        <svg class="amalia-svg-down-size icon">
            <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#down'"></use>
        </svg>
        Timeline globale
    </div>
    <div (click)="configIsOpen=true">
        <svg class="amalia-svg-down-size icon">
            <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#settings'"></use>
        </svg>
        Choisir les segments à afficher
    </div>
</div>
<div class="main-block">
    <div class="block main">
        <div class="focus" #focusContainer></div>
        <div class="timeline">
            <div class="cue-point">
            </div>
            <div class="segment"></div>
        </div>
    </div>
</div>
<div class="list-blocks" #listOfBlocksContainer [sortablejs]="listOfBlocks" [sortablejsOptions]="sortableOptions">
    <div class="block" *ngFor="let block of listOfBlocks;" #mainBlock>
        <div class="block-header" *ngIf="block.label!=''">
            <div class="extend">
                <svg class="amalia-svg-down-size icon" *ngIf="block.expendable" (click)="toggleState(mainBlock)">
                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#down'"></use>
                </svg>
                {{block.label}}
            </div>
            <div class="drag" [hidden]="!enableDragDrop">
                <svg class="amalia-svg-drag-drop-size icon">
                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#drag-drop'"></use>
                </svg>
            </div>
        </div>
        <div class="timeline">
            <div class="cue-point"
                 [ngStyle]="{'background-color': block.defaultColor ?block.defaultColor:block.defaultColor }"></div>
            <div class="segment"
                 [ngStyle]="{'background-color': block.defaultColor ?block.defaultColor:block.defaultColor }"></div>
        </div>
    </div>
</div>
<div class="footer">
    <div class="state-control" #stateControl (click)="toggleAllBlocksState(listOfBlocksContainer, stateControl)">
        <svg class="amalia-svg-down-size icon">
            <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#down'"></use>
        </svg>
        Fermer toutes les timelines
    </div>
    <div>
        <svg class="amalia-svg-down-size icon">
            <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#unzoom'"></use>
        </svg>
    </div>
    <div class="actions">
        <div>Actions :</div>
        <div class="zoom">Zoom</div>
        <div class="drag-drop" [ngClass]="{'selected':enableDragDrop}" (click)="enableDragDrop=!enableDragDrop">
            Déplacer
        </div>
    </div>
</div>
<div class="menu" [ngClass]="{'open':configIsOpen}">
    <div class="content">
        <div class="header">Gérer les segments à afficher</div>
        <div class="main"></div>
        <div class="footer">
            <button class="btn cancel" (click)="configIsOpen=!configIsOpen">Annuler</button>
            <button class="btn valid" (click)="configIsOpen=!configIsOpen">Valider</button>
        </div>
    </div>
</div>
