<div class="thumbnail" *ngIf="enableThumbnail" [hidden]="thumbnailHidden"
     [ngStyle]="{'background-image':'url('+thumbnailUrl+')', left:thumbnailPosition+'px'}"></div>
<div class="control-bar" [ngClass]="{'activated' : activated}" (mouseleave)="enableVolumeSlider=false" *ngIf="elements">
    <div *ngIf="hasComponentWithoutZone('progressBar')"
         class="control progress-bar" (mouseenter)="progressBarMouseEnter($event)"
         (mouseleave)="progressBarMouseLeave($event)" (mousemove)="progressBarMouseMove($event)">
        <div class="ui-slider">
            <div [style]="{width:(currentTime/duration)*100+'%'}" class="ui-slider-progress"></div>
            <input type="range" class="slider" min="0" [value]="progressBarValue" #progressBar
                   (mousedown)="handleProgressBarMouseDown(progressBar.value)"
                   (mousemove)="handleProgressBarMouseMove(progressBar.value)"
                   (mouseup)="handleProgressBarMouseUp(progressBar.value)">
        </div>
    </div>
    <div *ngFor="let colId of [1,2,3]; index as i; last as isLast;" [ngClass]="{'last':isLast,'mid':i===1} "
         class="column">
        <!-- ngSwitch by controls-->
        <ng-container *ngFor="let c of getControlsByZone(colId); " [ngSwitch]="c.control">
            <div (click)="controlClicked(c.control)" *ngSwitchCase="'playPause'"
                 class="play-pause control" title="{{c.label}}" [ngStyle]="{'order':c.order ? c.order:'0'}">
                <svg *ngIf="mediaPlayerElement.getMediaPlayer()?.isPaused()" class="amalia-svg-play-size icon">
                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#play'"></use>
                </svg>
                <svg *ngIf="!mediaPlayerElement.getMediaPlayer()?.isPaused()" class="amalia-svg-pause-size icon">
                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#pause'"></use>
                </svg>
            </div>

            <!--Aspect Ratio-->
            <div *ngSwitchCase="'aspectRatio'" class="aspect-ratio control text" title="{{c.label}}"
                 (click)="changeAspectRatio()" [ngStyle]="{'order':c.order ? c.order:'0'}">
                {{aspectRatio}}
            </div>
            <!--Playback Rate-->
            <div *ngSwitchCase="'playbackRate'" class="playback-rate control text" title="{{c.label}}"
                 [ngStyle]="{'order':c.order ? c.order:'0'}">
                {{currentPlaybackRate}}x
            </div>
            <!--Download-->
            <div *ngSwitchCase="'download'" class="control download" title="{{c.label}}"
                 [ngStyle]="{'order':c.order ? c.order:'0'}">
                <a [href]="c.data?.href" [download]="c.label" target="_blank">
                    <svg class="amalia-svg-{{c.icon}}-size icon" *ngIf="c.icon">
                        <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#'+c.icon"></use>
                    </svg>
                </a>
            </div>
            <!--Volume-->
            <div *ngSwitchCase="'volume'" class="volume control" title="{{c.label}}"
                 [ngStyle]="{'order':c.order ? c.order:'0'}"
                 (mouseenter)="enableVolumeSlider=true"
                 (click)="setupAudioNodes(c.data)"
                 >
                <svg *ngIf="volumeLeft > 0 || volumeRight > 0"
                    class="amalia-svg-volume-on-size icon" (click)="changeVolume(0 ? 100:0)">
                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#volume-on'"></use>
                </svg>
                <svg *ngIf="volumeLeft == 0 && volumeRight == 0"
                     class="amalia-svg-volume-off-size icon" (click)="changeVolume(0 ? 100:0)">
                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#volume-off'"></use>
                </svg>
                <div class="volume-control" [ngClass]="{'on':enableVolumeSlider}"
                     (mouseleave)="enableVolumeSlider=false">
                    <div class="channel-volume-sliders ">
                        <div class="header-list">Volume (m)</div>
                        <div class="channel-volume-control">
                            <div class="channel-volume-control-left">
                                <div (click)="changeVolume( volumeLeft==0 ? 100:0,'l')" class="channel-volume-icon">
                                    <svg *ngIf="volumeLeft > 0"
                                         class="amalia-svg-volume-on-size icon">
                                        <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#volume-on'"></use>
                                    </svg>
                                    <svg *ngIf="volumeLeft== 0"
                                         class="amalia-svg-volume-off-size icon">
                                        <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#volume-off'"></use>
                                    </svg>
                                </div>
                                <div class="left-volume-slider ui-slider">
                                    <div [style]="{width:volumeLeft+'%'}" class="ui-slider-progress"></div>
                                    <input #leftVolumeSlider (input)="changeVolume(leftVolumeSlider.value,'l')"
                                           [(ngModel)]="volumeLeft" class="slider" max="100"
                                           min="0" type="range"
                                           value="50">
                                    <div *ngIf="!mediaPlayerElement?.getMediaPlayer().withMergeVolume" class="channel-volume-control-mid"></div>
                                    <div [style]="{left:volumeLeft+'%'}" *ngIf="mediaPlayerElement?.getMediaPlayer().withMergeVolume" class="channel-volume-control-mid on"></div>
                                </div>
                                <div class="channel-volume-info"><span class="text-volume">G</span></div>
                            </div>

                            <div class="channel-volume-control-right">
                                <div (click)="changeVolume( volumeRight==0 ? 100:0,'r')" class="channel-volume-icon">
                                    <svg *ngIf="volumeRight > 0"
                                         class="amalia-svg-volume-on-size icon">
                                        <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#volume-on'"></use>
                                    </svg>
                                    <svg *ngIf="volumeRight== 0"
                                         class="amalia-svg-volume-off-size icon">
                                        <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#volume-off'"></use>
                                    </svg>
                                </div>
                                <div class="right-volume-slider ui-slider ">
                                    <div [style]="{width:volumeRight+'%'}" class="ui-slider-progress"></div>
                                    <input #rightVolumeSlider (input)="changeVolume(rightVolumeSlider.value,'r')"
                                           [(ngModel)]="volumeRight" class="slider" max="100"
                                           min="0" type="range"
                                           value="50">
                                </div>
                                <div class="channel-volume-info"><span class="text-volume">D</span></div>
                            </div>
                            <div (click)="changeSameVolumeState()" class="channel-volume-info-mid">
                                <svg *ngIf="!mediaPlayerElement?.getMediaPlayer().withMergeVolume"
                                     class="amalia-svg-padlock-open-size icon">
                                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#padlock-open'"></use>
                                </svg>
                                <svg *ngIf="mediaPlayerElement?.getMediaPlayer().withMergeVolume"
                                     class="amalia-svg-padlock-close-size icon">
                                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#padlock-close'"></use>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Other controls-->
            <div class="control" title="{{c.label}}" (click)="controlClicked(c.control)" *ngSwitchDefault
                 [ngStyle]="{'order':c.order ? c.order:'0'}">
                <svg class="amalia-svg-{{c.icon}}-size icon" *ngIf="c.icon">
                    <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#'+c.icon"></use>
                </svg>
            </div>
        </ng-container>
    </div>
</div>
<!-- Slider -->
<div class="playback-rate-slider" *ngIf="elements && hasComponentWithoutZone('playbackRateSteps')">
    <div class="playback-rate-labels">
        <input type="range" list="playback-rate-list" #playbackRateCursor
               [min]="minPlaybackRateSlider"
               [max]="maxPlaybackRateSlider"
               [step]="stepPlaybackRateSlider"
               [value]="currentPlaybackRate"
               (change)="onChangePlaybackRate(playbackRateCursor.value)">
        <datalist id="playback-rate-list">
            <option class="label"
                    *ngFor="let pr of sliderListOfPlaybackRateStep;index as i; first:as isFirst; last as isLast;"
                    [ngStyle]="{width:this.sliderListOfPlaybackRateStepWidth[i]+'%' }"
                    [ngClass]="{'first':isFirst,'last':isLast,'selected':pr ==currentPlaybackRate}"
                    (click)="onChangePlaybackRate(pr)" [selected]="pr ==currentPlaybackRate">{{pr}}x
            </option>
        </datalist>
    </div>
</div>
<!-- Slider 2-->
<div class="playback-rate-slider2" *ngIf="elements && hasComponentWithoutZone('playbackRateCustomSteps')">
    <div *ngFor="let pr of sliderListOfPlaybackRateCustomSteps;index as i; first:as isFirst; last as isLast;"
         [ngClass]="{'first':isFirst,'last':isLast,'selected':pr ==currentPlaybackRate}"
         (click)="onChangePlaybackRate(pr)">{{pr}}x
        <div class="line"></div>
    </div>
</div>
