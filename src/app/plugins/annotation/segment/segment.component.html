<div *ngIf="displayMode!=='readonly'">
    <div class="editable-segment">
        <p-card [class]="{'segment-selected':segment.selected}">
            <div class="segment-title">
                <p-floatLabel>
                    <input pInputText id="title" [(ngModel)]="segment.label"/>
                    <label for="title">Titre du segment</label>
                </p-floatLabel>
            </div>
            <div class="segment-tc">
                <div class="flex flex-column gap-2">
                    <label for="tcDebut">TC Début</label>
                    <input pInputText id="tcDebut" [(ngModel)]="segment.tcIn"/>
                </div>
                <div class="flex flex-column gap-2">
                    <label for="tcFin">TC Fin</label>
                    <input pInputText id="tcFin" [(ngModel)]="segment.tcOut"/>
                </div>
                <div class="flex flex-column gap-2">
                    <label for="tcDuree">TC Fin</label>
                    <input pInputText id="tcDuree" [(ngModel)]="segment.tc"/>
                </div>
            </div>
            <div class="segment-details">
                <div class="segment-categories">
                    <p-floatLabel>
                        <p-chips id="categories" [(ngModel)]="segment.categories"/>
                        <label for="categories">Catégories</label>
                    </p-floatLabel>
                </div>
                <div class="segment-description">
                    <p-floatLabel>
                             <textarea id="description" [(ngModel)]="segment.description" rows="5" cols="30"
                                       pInputTextarea
                                       [autoResize]="true"></textarea>
                        <label for="description">Description</label>
                    </p-floatLabel>
                </div>
                <div class="segment-keywords">
                    <p-floatLabel>
                        <p-chips id="keywords" [(ngModel)]="segment.keywords"/>
                        <label for="keywords">Mots-clés</label>
                    </p-floatLabel>
                </div>
            </div>
            <ng-template pTemplate="footer">
                <p-button id="btnannuler" label="Annuler" icon="pi pi-times-circle" (click)="cancelNewSegmentCreation()"
                          size="small"/>
                <p-button class="highlight" id="btnvalider" label="Valider" icon="pi pi-check"
                          (click)="validateNewSegment()" size="small"/>
            </ng-template>
        </p-card>
    </div>
</div>
<div *ngIf="displayMode==='readonly'">
    <div class="readonly-segment">
        <p-card [class]="{'segment-selected':segment.selected}">
            <ng-template pTemplate="header">
                <div class="segment-title">
                    {{ segment.label }}
                </div>
                <div class="header-buttons">
                    <p-button class="p-panel-header-icon p-link mr-2" id="btnedit" icon="pi pi-pencil"
                              (click)="editSegment()"/>
                    <p-button class="p-panel-header-icon p-link mr-2" id="btnclone" icon="pi pi-clone"
                              (click)="cloneSegment()"/>
                    <p-button class="p-panel-header-icon p-link mr-2" id="btnremove" icon="pi pi-trash"
                              (click)="removeSegment()"/>
                </div>
            </ng-template>
            <p-divider/>
            <div class="m-0">
                <div class="readonly-segment-info">
                    <div class="readonly-segment-thumbnail-block">
                        <div class="readonly-segment-thumbnail"><img alt="Thumbnail"/></div>
                        <div class="readonly-segment-camera-button">
                            <p-button icon="pi pi-camera"/>
                        </div>
                    </div>
                    <div class="readonly-segment-info-content">
                        <div class="readonly-segment-tc">
                            <div class="readonly-segment-tc-item">Début: {{ segment.tcIn }}</div>
                            <div class="readonly-segment-tc-item">Fin: {{ segment.tcOut }}</div>
                            <div class="readonly-segment-tc-item">Durée: {{ segment.tc }}</div>
                        </div>
                        <p-divider/>
                        <div class="readonly-segment-categories">
                            <ng-container *ngIf="segment.categories && segment.categories.length > 0">
                                <p-chip *ngFor="let category of segment.categories" [label]="category"/>
                            </ng-container>
                            <ng-container *ngIf="!segment.categories || segment.categories.length === 0">
                                Catégories: aucune
                            </ng-container>
                        </div>
                        <div class="readonly-segment-keywords">
                            <ng-container *ngIf="segment.keywords && segment.keywords.length > 0">
                                <p-chip *ngFor="let keyword of segment.keywords" [label]="keyword"/>
                            </ng-container>
                            <ng-container *ngIf="!segment.keywords || segment.keywords.length === 0">
                                Mots-clés: aucun
                            </ng-container>
                        </div>
                        <ng-container
                                *ngIf="!segment.description || segment.description.length === 0 || segment.description.trim().length === 0">
                            <div class="readonly-segment-description-empty">Description: aucune</div>
                        </ng-container>
                    </div>

                </div>
                <div *ngIf="segment.description && segment.description.length !== 0 && segment.description.trim().length !== 0"
                     class="readonly-segment-description">
                    {{ segment.description }}
                </div>
            </div>
        </p-card>
    </div>
</div>
