<!--<div class="header" #header *ngIf="pluginConfiguration && pluginConfiguration.data.title">
    <div class="resume">
        <h3 class="heading">{{pluginConfiguration.data?.title}}</h3>
        <p *ngIf="pluginConfiguration.data?.description">{{pluginConfiguration.data?.description}}</p>
    </div>
</div>-->
<div *ngIf="transcriptions && transcriptions.length>0; then transcriptionBlock; else emptyBlock"></div>
<div class="search-block" (keyup)="handleShortcut($event)" (click)="searchWord(searchText.value);">
    <div class="search-text">
        <div class="clear-icon">
            <svg class="amalia-svg-clear-size icon" *ngIf="typing === true" (click)="clearSearchList();active = false;typing= false;searchText.value ='';">
                <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#clear'"></use>
            </svg>
        </div>
        <div class="search-icon" [ngClass]="{'show' : searching === false}">
            <svg class="amalia-svg-search-size icon">
                <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#search'"></use>
            </svg>
            <span class="icon-loupe-m"></span>
        </div>
        <div class="v-line" *ngIf="(listOfSearchedNodes?.length >= 0 && searching === true)">
        </div>
        <div class="search-result" *ngIf="(listOfSearchedNodes?.length >= 0 && searching === true)">
                {{index}} / {{listOfSearchedNodes?.length}}
        </div>
        <div class="up" [ngClass]="{'show' : listOfSearchedNodes?.length > 0 && searching === true}" (click)="$event.stopPropagation();scrollToSearchedWord('up')">
            <svg class="amalia-svg-up-size icon" >
                <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#up'"></use>
            </svg>
        </div>
        <div class="down" [ngClass]="{'show' : listOfSearchedNodes?.length > 0 && searching === true}" (click)="$event.stopPropagation();scrollToSearchedWord('down')">
            <svg class="amalia-svg-down-size icon">
                <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#down'"></use>
            </svg>
        </div>
        <input type="text"
               placeholder={{pluginConfiguration.data.label}}
               (click)="$event.stopPropagation();active= true"
               (keyup)="handleChangeInput(searchText.value)"
               [ngClass]="{'active' : active === true}"
               #searchText>
    </div>
    <div class="message">
        <span *ngIf="(listOfSearchedNodes?.length > 0 && searching === true); else elseBlock">{{listOfSearchedNodes?.length}} mot(s)
        correspond aux terme recherché.
    </span>
        <ng-template #elseBlock><span
                *ngIf="(listOfSearchedNodes?.length === 0 && searching === true)">Aucun mot ne correspond aux termes de recherche</span>
        </ng-template>
    </div>
</div>
<ng-template #transcriptionBlock>
    <div class="transcription" #transcriptionElement (scroll)="handleScroll(true)">
        <div class="segment" *ngFor="let t of transcriptions" [attr.data-tcin]="t.tcIn" [attr.data-tcOut]="t.tcOut">
            <div class="timecode" (click)="callSeek(t.tcIn)">
                <div class="tcin">{{t.tcIn|tcFormat:tcDisplayFormat}}</div>
                <div class="separator"></div>
                <div class="tcout">{{t.tcOut|tcFormat:tcDisplayFormat}}</div>
            </div>

            <div class="named-entities" *ngIf="t.annotations.length>0" >
                <button class="named-entity" *ngFor="let a of t.annotations" data-toggle="tooltip" data-placement="bottom"
                        title="{{'ID métier : ' + a.id +'\n'+ 'Type de l\'annotation :' + a.type}}">{{a.label}}</button>
            </div>

            <div class="subsegment" [attr.data-tcin]="t.tcIn" [attr.data-tcOut]="t.tcOut">
            <div class="title">{{t.label}}</div>

            <div class="text" (click)="seekToWord($event)">
                <span *ngIf="t.subLocalisations && t.subLocalisations.length>0; then subLocalisationBlock; else wordBlock"></span>
                <ng-template #subLocalisationBlock>
                    <div *ngFor="let w of t.subLocalisations"
                          class="w"
                          [attr.data-tcin]="w.tcIn"
                          [attr.data-tcOut]="w.tcOut" [innerHTML]="w.text+' ' | sanitizeHtml: 'html'"></div>
                </ng-template>
                <ng-template #wordBlock><span class="w" [attr.data-tcin]="t.tcIn"
                                              [attr.data-tcOut]="t.tcOut"
                                              [innerHTML]="t.text | sanitizeHtml: 'html'"></span>
                </ng-template>
            </div>
            </div>
        </div>
    </div>
    <div class="auto-scroll" tooltip='{{pluginConfiguration.data.labelSynchro}}' [ngClass]="{'active' : displaySynchro}" (click)="scrollToSelectedSegment()">
        <svg class="amalia-svg-auto-scroll-size icon">
            <use [attr.xlink:href]="'assets/svgs/symbol/svg/sprite.symbol.svg#refresh'"></use>
        </svg>
    </div>
</ng-template>
<ng-template #emptyBlock>Error to find transcription</ng-template>
